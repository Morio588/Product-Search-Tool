<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <title>iStore ç™»å…¥ç³»çµ±</title>
  <script src="https://www.gstatic.com/firebasejs/10.13.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.13.0/firebase-auth.js"></script>
  <style>
    body { font-family: "Segoe UI", sans-serif; text-align: center; margin-top: 10%; }
    button { padding: 10px 20px; font-size: 16px; cursor: pointer; }
  </style>
</head>
<body>
  <h2>ç™»å…¥ iStore ç³»çµ±</h2>
  <p>è«‹ä½¿ç”¨å…¬å¸å¸³è™Ÿï¼ˆ@istore.com.twï¼‰ç™»å…¥</p>
  <button id="loginBtn">ä½¿ç”¨ Google ç™»å…¥</button>

  <script>
    // ğŸ”§ ä½ çš„ Firebase è¨­å®š
    const firebaseConfig = {
      apiKey: "AIzaSyAQH0RqBBwRQthE7vj80cH994GFkEYU1ho",
    authDomain: "istore-login-tc.firebaseapp.com",
    projectId: "istore-login-tc",
    storageBucket: "istore-login-tc.firebasestorage.app",
    messagingSenderId: "709619679365",
    appId: "1:709619679365:web:62a50024c61b54954129ec",
    measurementId: "G-K6JHQ9RD4Y"
    };

    // åˆå§‹åŒ– Firebase
    const app = firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();

    // ç™»å…¥äº‹ä»¶
    document.getElementById("loginBtn").addEventListener("click", () => {
      const provider = new firebase.auth.GoogleAuthProvider();
      auth.signInWithPopup(provider)
        .then(result => {
          const email = result.user.email;
          // âœ… é™åˆ¶ç™»å…¥ç¶²åŸŸ
          if (email.endsWith("@istore.com.tw")) {
            localStorage.setItem("userEmail", email);
            window.location.href = "main.html";
          } else {
            alert("ç¦æ­¢å¤–éƒ¨å¸³è™Ÿç™»å…¥ï¼");
            auth.signOut();
          }
        })
        .catch(error => {
          alert("ç™»å…¥å¤±æ•—ï¼š" + error.message);
        });
    });
  </script>
</body>
</html>
